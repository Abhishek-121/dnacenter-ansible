version: 2.1


jobs:
  build:
    
    parameters: 
      ansible_cisco_dnac_version:
        type: string
        default: "6.9.0"

    machine: true
    resource_class: rukapse/dnacenter-ansible
    working_directory: ~/repo 

    environment:
      REPO_URL: << pipeline.trigger_parameters.github_app.repo_url >>

    steps:
      - run:
          name: Debug Information
          command: |
            set -x 
            echo "REPO_URL: $REPO_URL"
            env

      - checkout:
          git: 
            depth: 1
            url: $REPO_URL


workflows:
  testing:
    jobs:
      - build