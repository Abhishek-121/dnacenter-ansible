---
- debug: msg="Starting site_management test"
- debug: msg="Role Path {{ role_path }}"

#############################################
#                CREATE SITE               ##
#############################################


- name: Test creating area with valid parameters
  cisco.dnac.site_workflow_manager:
    dnac_host: "{{dnac_host}}"
    dnac_username: "{{dnac_username}}"
    dnac_password: "{{dnac_password}}"
    dnac_verify: "{{dnac_verify}}"
    dnac_port: "{{dnac_port}}"
    dnac_version: "{{dnac_version}}"
    dnac_debug: "{{dnac_debug}}"
    dnac_log: true
    dnac_log_level: DEBUG
    config_verify: true
    state: merged
    config:
      - site:
          area:
            name: Abc
            parent_name: 'Global'
        type: area
  register: result

- name: Assert area creation success
  assert:
    that:
      - result.changed == true
      - result.response.status == "success"
      - result.response.site.parentName == "Parent Name"
      - "'created successfully' in result.msg"
    fail_msg: "Area creation failed"
    success_msg: "Area created successfully with valid parameters"

#############################################
#             IDEMPOTENCY CHECK            ##
#############################################



##############################################
##               DELETE SITE                ##
##############################################

